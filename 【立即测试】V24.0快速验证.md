# 🚀 V24.0 轻量级错题本系统 - 5分钟快速验证

## ⚡ 快速启动（30秒）

### 步骤1：启动服务
```bash
双击运行：【启动】简化版错题本系统.bat
```

会自动打开两个窗口：
- ✅ 后端服务窗口（端口8000）
- ✅ 前端服务窗口（端口5173）

### 步骤2：等待启动完成（约10秒）

**后端窗口应显示：**
```
✅ 通义千问API Key配置成功
✅ Pix2Text OCR引擎初始化成功
Application startup complete.
```

**前端窗口应显示：**
```
Local: http://localhost:5173/
```

---

## 🧪 功能验证（5分钟）

### 测试1：访问主界面 ✨

1. **浏览器打开：** `http://localhost:5173/`

2. **应该看到：**
   - 标题："🎓 沐梧AI - 智能错题本"
   - 副标题："无需登录 · 轻量便捷 · AI助学"
   - 三个统计卡片（紫色渐变背景）：
     - 错题总数
     - 生成题目
     - 已选错题
   - 三个标签页：
     - 📚 错题本
     - ✨ 生成的题目
     - 🎯 AI出题

3. **如果看不到界面：**
   - 检查前端是否启动成功
   - 刷新浏览器（Ctrl+F5）

---

### 测试2：添加测试错题 📝

由于新系统无法直接上传图片，我们用API添加测试数据：

#### 方式A：使用浏览器API文档（推荐）

1. **访问：** `http://127.0.0.1:8000/docs`

2. **找到 `POST /mistakes/` 接口**

3. **点击"Try it out"**

4. **粘贴测试数据：**
```json
{
  "image_base64": "iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==",
  "question_text": "求函数 f(x) = x² + 2x + 1 的最小值",
  "wrong_answer": "最小值是0",
  "ai_analysis": "此题考查二次函数的最值问题。正确答案：配方后得 f(x) = (x+1)² ，最小值是0（当x=-1时）。你的答案正确但理由不完整，应说明在x=-1时取得最小值。",
  "subject": "数学",
  "knowledge_points": ["二次函数", "配方法", "函数最值"]
}
```

5. **点击"Execute"**

6. **应该看到：** Response Code 200，返回新创建的错题数据

#### 方式B：使用命令行
```bash
curl -X POST "http://127.0.0.1:8000/mistakes/" ^
-H "Content-Type: application/json" ^
-d "{\"image_base64\": \"test\", \"question_text\": \"测试题目\", \"subject\": \"数学\", \"knowledge_points\": [\"函数\"]}"
```

#### 添加更多测试数据

重复上述步骤，添加2-3道错题，建议不同科目：

**数学题示例：**
```json
{
  "image_base64": "test_image_2",
  "question_text": "解方程：2x + 3 = 7",
  "wrong_answer": "x = 1",
  "ai_analysis": "方程求解错误。正确解法：2x = 7 - 3 = 4，所以 x = 2。你可能在移项时忘记改变符号。",
  "subject": "数学",
  "knowledge_points": ["一元一次方程", "移项法则"]
}
```

**物理题示例：**
```json
{
  "image_base64": "test_image_3",
  "question_text": "一个物体做匀速直线运动，速度为5m/s，求10秒后的位移",
  "wrong_answer": "位移是50m",
  "ai_analysis": "答案正确！s = vt = 5 × 10 = 50m。继续保持！",
  "subject": "物理",
  "knowledge_points": ["匀速直线运动", "位移公式"]
}
```

---

### 测试3：查看错题本 📚

1. **刷新主界面：** `http://localhost:5173/`

2. **应该看到：**
   - 统计卡片显示："3" 错题总数
   - 错题本标签页显示3张卡片
   - 每张卡片包含：
     - 科目标签（蓝色圆角）
     - 题目文本
     - 知识点标签（灰色小标签）
     - 时间戳
     - "选中"复选框
     - "🗑️ 删除"按钮

3. **测试删除功能：**
   - 点击任意一张卡片的"🗑️ 删除"按钮
   - 确认删除
   - 卡片消失，统计数字减1

4. **测试选中功能：**
   - 勾选2-3道错题的"选中"复选框
   - 卡片背景变为浅绿色
   - 顶部统计卡片"已选错题"数字更新

---

### 测试4：AI智能出题 🎯

1. **确保已选中至少1道错题**

2. **切换到"🎯 AI出题"标签页**

3. **应该看到：**
   - 紫色渐变的标题卡片
   - 使用步骤说明
   - 中间显示："已选择 X 道错题"
   - "✨ 开始生成"按钮（蓝色，可点击）

4. **点击"开始生成"按钮**

5. **等待生成（5-10秒）**
   - 按钮变为："⏳ 生成中..."
   - 按钮变灰，不可点击

6. **生成成功后：**
   - 弹出提示："成功生成3道题目！"
   - 自动跳转到"✨ 生成的题目"标签页
   - 选中状态清空

7. **如果生成失败：**
   - 检查后端API Key是否配置
   - 查看后端窗口是否有错误
   - 检查网络连接

---

### 测试5：查看和导出题目 📄

1. **在"✨ 生成的题目"标签页**

2. **应该看到：**
   - 3道题目，每道题包含：
     - 题目编号
     - 难度标签（黄色）
     - "📥 导出"按钮
     - 题目内容（灰色背景框）
     - 答案（绿色标记）
     - 解析（橙色背景框）
     - 知识点标签（蓝色）

3. **测试单个导出：**
   - 点击任意题目右上角的"📥 导出"按钮
   - 浏览器自动下载Markdown文件
   - 用文本编辑器打开，检查格式

4. **测试批量导出：**
   - 点击页面右上角的"📥 导出全部"按钮
   - 下载包含所有题目的Markdown文件

5. **Markdown文件应包含：**
```markdown
# 练习题集

生成时间：2025-10-19 XX:XX:XX

---

## 题目1

[题目内容]

**答案：** [答案]

**解析：** [解析]

**知识点：** [知识点列表]

---
```

---

### 测试6：统计功能 📊

1. **访问统计API：** `http://127.0.0.1:8000/mistakes/stats/summary`

2. **应该看到JSON数据：**
```json
{
  "total_mistakes": 2,
  "subjects": {
    "数学": 2,
    "物理": 1
  },
  "top_knowledge_points": [
    ["函数", 2],
    ["二次函数", 1],
    ...
  ]
}
```

---

## ✅ 验证检查清单

完成所有测试后，确认：

- [ ] 后端服务正常启动
- [ ] 前端界面正常显示
- [ ] 能够添加错题（通过API）
- [ ] 错题本显示正确
- [ ] 能够选中和删除错题
- [ ] AI能够生成新题目
- [ ] 生成的题目显示完整
- [ ] 能够导出Markdown文件
- [ ] 统计数据正确

---

## 🐛 常见问题排查

### 问题1：前端页面空白
**排查：**
1. F12打开Console，查看错误
2. 检查 `http://localhost:5173/` 是否能访问
3. 尝试访问 `http://localhost:5173/?mode=old` 看是否正常

### 问题2：后端API调用失败
**排查：**
1. 访问 `http://127.0.0.1:8000`，应该返回JSON
2. 检查后端窗口是否有错误信息
3. 确认API Key已配置（`.env`文件）

### 问题3：AI生成失败
**排查：**
1. 检查 `backend/.env` 文件中的 `DASHSCOPE_API_KEY`
2. 测试API Key：`http://127.0.0.1:8000/` 查看响应
3. 查看后端窗口的错误日志

### 问题4：数据没有保存
**排查：**
1. 检查 `backend/simple_data/` 目录是否存在
2. 查看 `mistakes.json` 和 `generated_questions.json` 文件
3. 确认文件有写入权限

---

## 🎉 测试完成！

如果所有测试通过，恭喜你！系统运行完美！

### 下一步：

1. **日常使用**
   - 直接访问：`http://localhost:5173/`
   - 配合原解题界面使用（`?mode=old`）自动保存错题

2. **数据备份**
   - 定期备份 `backend/simple_data/` 目录

3. **导出题目**
   - 定期将生成的题目导出为Markdown
   - 打印或分享给同学

---

**祝学习愉快！📚✨**

