# æ²æ¢§AIè§£é¢˜ç³»ç»Ÿ - å®Œæ•´æŠ€æœ¯æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**æ²æ¢§AIè§£é¢˜ç³»ç»Ÿ**æ˜¯ä¸€ä¸ªåŸºäºäººå·¥æ™ºèƒ½çš„æ™ºèƒ½æ•™è‚²è¾…åŠ©å¹³å°ï¼Œé›†æˆäº†è§£é¢˜ã€æ‰¹æ”¹ã€é”™é¢˜ç®¡ç†ã€æ™ºèƒ½å‡ºé¢˜ç­‰å¤šé¡¹åŠŸèƒ½ï¼Œæ—¨åœ¨ä¸ºå­¦ç”Ÿæä¾›ä¸ªæ€§åŒ–çš„å­¦ä¹ è¾…å¯¼ä½“éªŒã€‚

### æ ¸å¿ƒå®šä½
- **æ™ºèƒ½è§£é¢˜åŠ©æ‰‹**ï¼šä¸Šä¼ é¢˜ç›®å›¾ç‰‡ï¼ŒAIç»™å‡ºè¯¦ç»†è§£ç­”
- **ä½œä¸šæ‰¹æ”¹ç³»ç»Ÿ**ï¼šè‡ªåŠ¨æ‰¹æ”¹ä½œä¸šï¼ŒæŒ‡å‡ºé”™è¯¯å¹¶ç»™å‡ºæ­£è§£
- **ä¸ªæ€§åŒ–é”™é¢˜æœ¬**ï¼šè‡ªåŠ¨ä¿å­˜é”™é¢˜ï¼ŒæŒ‰çŸ¥è¯†ç‚¹åˆ†ç±»ç®¡ç†
- **æ™ºèƒ½å‡ºé¢˜å¼•æ“**ï¼šåŸºäºé”™é¢˜ç”Ÿæˆä¸ªæ€§åŒ–ç»ƒä¹ é¢˜

### æŠ€æœ¯ç‰¹è‰²
- **æ··åˆè¾“å…¥æ¶æ„**ï¼šOCRæ–‡å­—è¯†åˆ« + åŸå›¾è§†è§‰ç†è§£ï¼ŒåŒé‡ä¿éšœ
- **è‡ªåŠ¨åŒ–é”™é¢˜ç®¡ç†**ï¼šæ‰¹æ”¹æ—¶è‡ªåŠ¨è¯†åˆ«é”™è¯¯ï¼Œæå–çŸ¥è¯†ç‚¹ï¼Œä¿å­˜é”™é¢˜
- **LaTeXå…¬å¼æ”¯æŒ**ï¼šå®Œæ•´çš„æ•°å­¦å…¬å¼æ¸²æŸ“ï¼Œæ”¯æŒMarkdownæ ¼å¼
- **æœ¬åœ°åŒ–å­˜å‚¨**ï¼šä½¿ç”¨JSONæ–‡ä»¶å­˜å‚¨ï¼Œæ— éœ€æ•°æ®åº“ï¼Œè½»é‡çº§éƒ¨ç½²

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. AIæ™ºèƒ½è§£é¢˜

#### åŠŸèƒ½æè¿°
ç”¨æˆ·ä¸Šä¼ é¢˜ç›®å›¾ç‰‡ï¼Œç³»ç»Ÿé€šè¿‡AIè¿›è¡Œæ™ºèƒ½è§£ç­”ï¼Œæä¾›è¯¦ç»†çš„è§£é¢˜æ­¥éª¤å’Œæ€è·¯ã€‚

#### ä½¿ç”¨åœºæ™¯
- å­¦ç”Ÿé‡åˆ°éš¾é¢˜ï¼Œéœ€è¦è¯¦ç»†è§£ç­”
- æƒ³å­¦ä¹ æŸé“é¢˜çš„è§£é¢˜æ–¹æ³•
- éœ€è¦é€æ­¥è§£é¢˜æŒ‡å¯¼

#### æŠ€æœ¯æµç¨‹
```
ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡
    â†“
å›¾åƒé¢„å¤„ç†ï¼ˆè°ƒæ•´å°ºå¯¸ã€æ ¼å¼è½¬æ¢ï¼‰
    â†“
OCRè¯†åˆ«ï¼ˆPix2Textæå–æ–‡å­—å’Œå…¬å¼ï¼‰
    â†“
å›¾åƒå¢å¼ºï¼ˆé”åŒ–ã€å¯¹æ¯”åº¦å¢å¼ºï¼‰
    â†“
æ··åˆè¾“å…¥æ„å»ºï¼ˆOCRæ–‡æœ¬ + åŸå§‹å›¾ç‰‡ï¼‰
    â†“
è°ƒç”¨é€šä¹‰åƒé—®AIï¼ˆqwen-vl-maxï¼‰
    â†“
AIç”Ÿæˆè¯¦ç»†è§£ç­”
    â†“
Markdownæ ¼å¼åŒ–æ˜¾ç¤º
    â†“
MathJaxæ¸²æŸ“LaTeXå…¬å¼
```

#### å…³é”®ç‰¹æ€§
- **ä¸‰ç§è§£é¢˜æ¨¡å¼**ï¼š
  - å•é¢˜è§£ç­”ï¼šå¤„ç†ä¸€é“é¢˜
  - æ•´å¼ å›¾ç‰‡ï¼šè§£ç­”æ‰€æœ‰é¢˜ç›®
  - æŒ‡å®šé¢˜ç›®ï¼šåªè§£ç­”ç‰¹å®šé¢˜å·
  
- **è¿½é—®åŠŸèƒ½**ï¼š
  - å¯ä»¥é’ˆå¯¹AIçš„å›ç­”ç»§ç»­æé—®
  - ä¿æŒä¸Šä¸‹æ–‡ï¼ŒAIè®°ä½ä¹‹å‰çš„å¯¹è¯
  - é‡æ–°å‘é€åŸå›¾ï¼Œé¿å…AIé—å¿˜

- **å†å²è®°å½•**ï¼š
  - è‡ªåŠ¨ä¿å­˜å¯¹è¯å†å²
  - å¯æ¢å¤ä¹‹å‰çš„ä¼šè¯
  - æŒ‰æ—¶é—´æ’åºï¼Œå¿«é€ŸæŸ¥æ‰¾

### 2. AIæ‰¹æ”¹ä½œä¸š

#### åŠŸèƒ½æè¿°
ç”¨æˆ·ä¸Šä¼ åŒ…å«é¢˜ç›®å’Œç­”æ¡ˆçš„å›¾ç‰‡ï¼ŒAIè‡ªåŠ¨æ‰¹æ”¹ï¼ŒæŒ‡å‡ºå¯¹é”™ï¼Œç»™å‡ºæ­£ç¡®è§£æ³•ã€‚

#### ä½¿ç”¨åœºæ™¯
- å­¦ç”Ÿå®Œæˆä½œä¸šåè‡ªæŸ¥
- å®¶é•¿è¾…å¯¼å­©å­æ£€æŸ¥ä½œä¸š
- æ•™å¸ˆæ‰¹é‡æ‰¹æ”¹ä½œä¸š

#### æŠ€æœ¯æµç¨‹
```
ç”¨æˆ·ä¸Šä¼ é¢˜ç›®+ç­”æ¡ˆå›¾ç‰‡
    â†“
OCRè¯†åˆ«ï¼ˆæå–é¢˜ç›®å’Œç­”æ¡ˆï¼‰
    â†“
AIæ‰¹æ”¹åˆ†æ
    â†“
æ£€æµ‹é”™è¯¯ â†’ æ·»åŠ  [MISTAKE_DETECTED] æ ‡è®°
æ£€æµ‹æ­£ç¡® â†’ æ·»åŠ  [CORRECT] æ ‡è®°
    â†“
ã€è‡ªåŠ¨é”™é¢˜ä¿å­˜æµç¨‹ã€‘
    â†“
æå–é”™è¯¯éƒ¨åˆ†è§£æ
    â†“
AIæå–çŸ¥è¯†ç‚¹ï¼ˆ3-5ä¸ªç²¾ç¡®çŸ¥è¯†ç‚¹ï¼‰
    â†“
æ¨æµ‹å­¦ç§‘ï¼ˆæ•°å­¦ã€ç‰©ç†ã€è‹±è¯­ç­‰ï¼‰
    â†“
ä¿å­˜åˆ°é”™é¢˜æœ¬ï¼ˆJSONæ–‡ä»¶ï¼‰
    â†“
è¿”å›æ‰¹æ”¹ç»“æœ + é”™é¢˜ä¿å­˜æç¤º
```

#### å…³é”®ç‰¹æ€§
- **æ™ºèƒ½åˆ¤æ–­æ ‡å‡†**ï¼š
  ```
  âœ… [CORRECT]ï¼šç­”æ¡ˆæ­£ç¡®ï¼Œé€»è¾‘åˆç†ï¼Œå³ä½¿æœ‰å°ç‘•ç–µ
  âŒ [MISTAKE_DETECTED]ï¼šç­”æ¡ˆé”™è¯¯ã€è®¡ç®—æœ‰è¯¯ã€æ¦‚å¿µç†è§£é”™è¯¯
  ```

- **è‡ªåŠ¨é”™é¢˜ä¿å­˜**ï¼š
  - åªä¿å­˜åšé”™çš„é¢˜ç›®
  - è‡ªåŠ¨æå–çŸ¥è¯†ç‚¹ï¼ˆå¦‚"äºŒé¡¹å¼å®šç†"ã€"ç»„åˆæ•°è®¡ç®—"ï¼‰
  - æ¨æµ‹å­¦ç§‘åˆ†ç±»
  - ä¿å­˜å®Œæ•´çš„é¢˜ç›®å›¾ç‰‡ã€è§£æã€çŸ¥è¯†ç‚¹

- **çŸ¥è¯†ç‚¹ç²¾ç¡®åŒ–**ï¼š
  - AIæç¤ºè¦æ±‚ç²¾ç¡®åˆ°å…·ä½“æ¦‚å¿µ
  - å¦‚"ä¸€å…ƒäºŒæ¬¡æ–¹ç¨‹æ±‚æ ¹å…¬å¼"è€Œé"æ–¹ç¨‹"
  - é™åˆ¶3-5ä¸ªçŸ¥è¯†ç‚¹ï¼ŒæŒ‰é‡è¦æ€§æ’åº

### 3. æ™ºèƒ½é”™é¢˜æœ¬

#### åŠŸèƒ½æè¿°
è‡ªåŠ¨ç®¡ç†ç”¨æˆ·çš„é”™é¢˜ï¼ŒæŒ‰çŸ¥è¯†ç‚¹åˆ†ç±»ï¼Œæä¾›ç»Ÿè®¡åˆ†æï¼Œæ”¯æŒç­›é€‰å’Œå¯¼å‡ºã€‚

#### æ•°æ®ç»“æ„
```json
{
  "id": "uuid",
  "image_base64": "é”™é¢˜åŸå›¾",
  "question_text": "OCRè¯†åˆ«çš„é¢˜ç›®æ–‡æœ¬",
  "wrong_answer": "å­¦ç”Ÿçš„é”™è¯¯ç­”æ¡ˆ",
  "ai_analysis": "AIçš„æ‰¹æ”¹è§£æ",
  "subject": "æ•°å­¦",
  "knowledge_points": ["äºŒé¡¹å¼å®šç†", "ç»„åˆæ•°è®¡ç®—"],
  "created_at": "2025-10-20T13:57:07",
  "reviewed_count": 0
}
```

#### æ ¸å¿ƒåŠŸèƒ½

**A. é”™é¢˜ç®¡ç†**
- æŸ¥çœ‹æ‰€æœ‰é”™é¢˜ï¼ˆæŒ‰æ—¶é—´å€’åºï¼‰
- æŸ¥çœ‹é”™é¢˜åŸå›¾
- æŸ¥çœ‹AIè§£æ
- æŒ‰å­¦ç§‘ç­›é€‰ï¼ˆæ•°å­¦ã€ç‰©ç†ã€åŒ–å­¦ç­‰ï¼‰
- åˆ é™¤é”™é¢˜

**B. ç»Ÿè®¡åˆ†æ**
```javascript
{
  "total_mistakes": 15,        // æ€»é”™é¢˜æ•°
  "by_subject": {              // æŒ‰å­¦ç§‘ç»Ÿè®¡
    "æ•°å­¦": 10,
    "ç‰©ç†": 3,
    "è‹±è¯­": 2
  },
  "recent_mistakes": [...]     // æœ€è¿‘é”™é¢˜
}
```

**C. çŸ¥è¯†ç‚¹æ ‡ç­¾ç³»ç»Ÿ**
- è‡ªåŠ¨æå–æ‰€æœ‰å”¯ä¸€çŸ¥è¯†ç‚¹
- å¯é€‰æ‹©çŸ¥è¯†ç‚¹ç­›é€‰é”™é¢˜
- åŸºäºçŸ¥è¯†ç‚¹ç”Ÿæˆç»ƒä¹ 

#### å­˜å‚¨æ–¹æ¡ˆ
- ä½¿ç”¨JSONæ–‡ä»¶æœ¬åœ°å­˜å‚¨ï¼ˆ`backend/mistakes.json`ï¼‰
- æ— éœ€æ•°æ®åº“ï¼Œè½»é‡çº§
- æ”¯æŒå¹¶å‘è¯»å†™ï¼ˆæ–‡ä»¶é”æœºåˆ¶ï¼‰

### 4. AIæ™ºèƒ½å‡ºé¢˜

#### åŠŸèƒ½æè¿°
åŸºäºç”¨æˆ·çš„é”™é¢˜ç”Ÿæˆç›¸ä¼¼çš„ç»ƒä¹ é¢˜ï¼Œå¸®åŠ©å·©å›ºè–„å¼±çŸ¥è¯†ç‚¹ã€‚

#### ç”Ÿæˆæ¨¡å¼

**A. åŸºäºé”™é¢˜ç”Ÿæˆ**
```
é€‰æ‹©é”™é¢˜ â†’ AIåˆ†æé”™é¢˜ç±»å‹ â†’ ç”Ÿæˆç›¸ä¼¼é¢˜ç›®
```

**B. åŸºäºçŸ¥è¯†ç‚¹ç”Ÿæˆ**
```
é€‰æ‹©çŸ¥è¯†ç‚¹ â†’ ç­›é€‰ç›¸å…³é”™é¢˜ â†’ AIç”Ÿæˆé’ˆå¯¹æ€§ç»ƒä¹ 
```

#### æŠ€æœ¯æµç¨‹
```
ç”¨æˆ·é€‰æ‹©é”™é¢˜/çŸ¥è¯†ç‚¹
    â†“
é…ç½®ç”Ÿæˆå‚æ•°ï¼š
- é¢˜ç›®æ•°é‡ï¼ˆ1-20é¢˜ï¼‰
- éš¾åº¦ç­‰çº§ï¼ˆç®€å•/ä¸­ç­‰/å›°éš¾ï¼‰
- é¢˜å‹ï¼ˆé€‰æ‹©é¢˜/å¡«ç©ºé¢˜/è§£ç­”é¢˜/ç»¼åˆï¼‰
    â†“
åç«¯è°ƒç”¨AIï¼ˆé€šä¹‰åƒé—®ï¼‰
    â†“
AIåˆ†æé”™é¢˜ï¼š
- è€ƒæŸ¥çŸ¥è¯†ç‚¹
- é¢˜ç›®éš¾åº¦
- è§£é¢˜æ–¹æ³•
    â†“
AIç”Ÿæˆæ–°é¢˜ç›®ï¼š
- é¢˜ç›®å†…å®¹ï¼ˆMarkdown + LaTeXï¼‰
- æ ‡å‡†ç­”æ¡ˆ
- è¯¦ç»†è§£æ
- å…³è”çŸ¥è¯†ç‚¹
    â†“
ä¿å­˜åˆ°é¢˜åº“ï¼ˆquestions.jsonï¼‰
    â†“
å‰ç«¯å±•ç¤ºï¼ˆLaTeXæ¸²æŸ“ï¼‰
```

#### é¢˜ç›®æ•°æ®ç»“æ„
```json
{
  "id": "uuid",
  "content": "é¢˜ç›®å†…å®¹ï¼ˆMarkdownæ ¼å¼ï¼Œå«LaTeXï¼‰",
  "answer": "æ ‡å‡†ç­”æ¡ˆ",
  "explanation": "è¯¦ç»†è§£æ",
  "difficulty": "ä¸­ç­‰",
  "question_type": "è§£ç­”é¢˜",
  "knowledge_points": ["äºŒé¡¹å¼å®šç†", "ç»„åˆæ•°"],
  "source_mistake_ids": ["åŸé”™é¢˜ID"],
  "created_at": "2025-10-20T13:57:07"
}
```

#### å…³é”®ç‰¹æ€§
- **Markdown + LaTeXæ”¯æŒ**ï¼šé¢˜ç›®ä¸­çš„æ•°å­¦å…¬å¼è‡ªåŠ¨æ¸²æŸ“
- **æ‰¹é‡ç”Ÿæˆ**ï¼šä¸€æ¬¡å¯ç”Ÿæˆå¤šé“é¢˜ç›®
- **æ™ºèƒ½å¯¼å‡º**ï¼š
  - æ”¯æŒPDFå¯¼å‡ºï¼ˆä¿ç•™å…¬å¼æ¸²æŸ“ï¼‰
  - æ”¯æŒMarkdownå¯¼å‡º
  - å¯é€‰æ‹©éƒ¨åˆ†é¢˜ç›®å¯¼å‡º
- **é¢˜ç›®ç®¡ç†**ï¼š
  - æŸ¥çœ‹æ‰€æœ‰ç”Ÿæˆçš„é¢˜ç›®
  - åˆ é™¤ä¸éœ€è¦çš„é¢˜ç›®
  - æŒ‰çŸ¥è¯†ç‚¹ç­›é€‰

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·ç•Œé¢å±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ AIæ™ºèƒ½è§£é¢˜   â”‚  â”‚ AIæ‰¹æ”¹ä½œä¸š   â”‚  â”‚ æ™ºèƒ½é”™é¢˜æœ¬   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚  â”‚ AIæ™ºèƒ½å‡ºé¢˜   â”‚  â”‚ å†å²è®°å½•     â”‚                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“ â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å‰ç«¯åº”ç”¨å±‚ (React)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ React Components                                  â”‚       â”‚
â”‚  â”‚  - App.tsx (è§£é¢˜/æ‰¹æ”¹)                            â”‚       â”‚
â”‚  â”‚  - SimpleMistakeBook.tsx (é”™é¢˜æœ¬/å‡ºé¢˜)           â”‚       â”‚
â”‚  â”‚  - ModeSelector.tsx (æ¨¡å¼é€‰æ‹©)                   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ å‰ç«¯åŠŸèƒ½æ¨¡å—                                       â”‚       â”‚
â”‚  â”‚  - ErrorBoundary (é”™è¯¯è¾¹ç•Œ)                       â”‚       â”‚
â”‚  â”‚  - å…¨å±€é”™è¯¯ç›‘å¬å™¨                                  â”‚       â”‚
â”‚  â”‚  - MathJaxæ¸²æŸ“å¼•æ“                                â”‚       â”‚
â”‚  â”‚  - Marked Markdownè§£æ                           â”‚       â”‚
â”‚  â”‚  - LocalStorageä¼šè¯ç®¡ç†                          â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“ â†‘ HTTP/JSON
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åç«¯APIå±‚ (FastAPI)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ RESTful API Endpoints                             â”‚       â”‚
â”‚  â”‚  - POST /chat (è§£é¢˜/æ‰¹æ”¹)                         â”‚       â”‚
â”‚  â”‚  - GET/POST/DELETE /mistakes/* (é”™é¢˜ç®¡ç†)        â”‚       â”‚
â”‚  â”‚  - GET/POST/DELETE /questions/* (é¢˜ç›®ç®¡ç†)       â”‚       â”‚
â”‚  â”‚  - GET /mistakes/stats/* (ç»Ÿè®¡åˆ†æ)              â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ ä¸­é—´ä»¶ & é…ç½®                                      â”‚       â”‚
â”‚  â”‚  - CORS (è·¨åŸŸæ”¯æŒ)                                â”‚       â”‚
â”‚  â”‚  - ä¼šè¯ç®¡ç† (å†…å­˜å­˜å‚¨)                            â”‚       â”‚
â”‚  â”‚  - æ–‡ä»¶é”æœºåˆ¶                                      â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“ â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ä¸šåŠ¡é€»è¾‘å±‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ OCRå¼•æ“      â”‚  â”‚ å›¾åƒå¢å¼º     â”‚  â”‚ AIè°ƒç”¨       â”‚      â”‚
â”‚  â”‚ (Pix2Text)   â”‚  â”‚ (OpenCV)     â”‚  â”‚ (é€šä¹‰åƒé—®)   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ é”™é¢˜æå–     â”‚  â”‚ çŸ¥è¯†ç‚¹è¯†åˆ«   â”‚  â”‚ é¢˜ç›®ç”Ÿæˆ     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“ â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ•°æ®å­˜å‚¨å±‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ mistakes.jsonâ”‚  â”‚ questions.jsonâ”‚  â”‚ ä¼šè¯å†…å­˜    â”‚      â”‚
â”‚  â”‚ (é”™é¢˜æ•°æ®)   â”‚  â”‚ (é¢˜ç›®æ•°æ®)   â”‚  â”‚ (ä¸´æ—¶ä¼šè¯)  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚ LocalStorage â”‚ (å‰ç«¯ä¼šè¯æŒä¹…åŒ–)                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### éƒ¨ç½²æ¶æ„

```
ç”¨æˆ·æµè§ˆå™¨ (http://localhost:5173)
        â†“
Viteå¼€å‘æœåŠ¡å™¨ (å‰ç«¯)
        â†“ APIè°ƒç”¨
UvicornæœåŠ¡å™¨ (http://127.0.0.1:8000)
        â†“
FastAPIåº”ç”¨ (åç«¯)
        â†“ â”œâ”€â†’ Pix2Text OCRå¼•æ“
        â”‚ â”œâ”€â†’ OpenCVå›¾åƒå¤„ç†
        â”‚ â”œâ”€â†’ é€šä¹‰åƒé—®API (å¤–éƒ¨AIæœåŠ¡)
        â”‚ â””â”€â†’ JSONæ–‡ä»¶å­˜å‚¨
        â†“
æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ
```

---

## ğŸ”§ æŠ€æœ¯æ ˆè¯¦è§£

### å‰ç«¯æŠ€æœ¯æ ˆ

#### æ ¸å¿ƒæ¡†æ¶
- **React 18.x**ï¼šç”¨æˆ·ç•Œé¢æ„å»º
- **TypeScript**ï¼šç±»å‹å®‰å…¨çš„JavaScript
- **Vite**ï¼šç°ä»£åŒ–å‰ç«¯æ„å»ºå·¥å…·

#### UIç›¸å…³
- **React-Image-Crop**ï¼šå›¾ç‰‡è£å‰ªåŠŸèƒ½
- **Marked**ï¼šMarkdownè§£æåº“
- **MathJax 3.x**ï¼šLaTeXæ•°å­¦å…¬å¼æ¸²æŸ“

#### çŠ¶æ€ç®¡ç†
- **React Hooks**ï¼šuseState, useEffect, useRef
- **LocalStorage**ï¼šä¼šè¯æŒä¹…åŒ–å­˜å‚¨

#### ç½‘ç»œè¯·æ±‚
- **Axios**ï¼šHTTPå®¢æˆ·ç«¯
  - è¶…æ—¶é…ç½®ï¼š5-10åˆ†é’Ÿï¼ˆé€‚åº”AIç”Ÿæˆï¼‰
  - é”™è¯¯å¤„ç†ï¼šè¯¦ç»†çš„é”™è¯¯åˆ†ç±»

#### é”™è¯¯å¤„ç†
- **ErrorBoundary**ï¼šReacté”™è¯¯è¾¹ç•Œç»„ä»¶
- **å…¨å±€é”™è¯¯ç›‘å¬**ï¼šwindow.onerror, unhandledrejection
- **ä¸‰å±‚æ¸²æŸ“é˜²æŠ¤**ï¼šè¿‡æ»¤ â†’ å®¹é”™ â†’ é™çº§

### åç«¯æŠ€æœ¯æ ˆ

#### æ ¸å¿ƒæ¡†æ¶
- **FastAPI**ï¼šç°ä»£åŒ–Python Webæ¡†æ¶
  - å¼‚æ­¥æ”¯æŒ
  - è‡ªåŠ¨APIæ–‡æ¡£ï¼ˆSwaggerï¼‰
  - ç±»å‹éªŒè¯ï¼ˆPydanticï¼‰

#### å›¾åƒå¤„ç†
- **Pix2Text**ï¼šOCRæ–‡å­—è¯†åˆ«å¼•æ“
  - æ”¯æŒä¸­è‹±æ–‡è¯†åˆ«
  - æ•°å­¦å…¬å¼è¯†åˆ«ï¼ˆLaTeXè¾“å‡ºï¼‰
  - MFD (Math Formula Detection)

- **Pillow (PIL)**ï¼šå›¾åƒåŸºç¡€æ“ä½œ
  - æ ¼å¼è½¬æ¢
  - å°ºå¯¸è°ƒæ•´
  - æ¨¡å¼è½¬æ¢ï¼ˆRGB, RGBAç­‰ï¼‰

- **OpenCV (cv2)**ï¼šé«˜çº§å›¾åƒå¤„ç†
  - é”åŒ–ï¼ˆåé”åŒ–æ©æ¨¡ï¼‰
  - å¯¹æ¯”åº¦å¢å¼ºï¼ˆCLAHEï¼‰
  - è‰²å½©ç©ºé—´è½¬æ¢

#### AIæœåŠ¡
- **Dashscope SDK**ï¼šé˜¿é‡Œäº‘é€šä¹‰åƒé—®
  - æ¨¡å‹ï¼šqwen-vl-maxï¼ˆå¤šæ¨¡æ€å¤§æ¨¡å‹ï¼‰
  - æ”¯æŒæ–‡æœ¬+å›¾åƒæ··åˆè¾“å…¥
  - æœ€å¤§è¾“å‡ºï¼š8192 tokens

#### æ•°æ®å¤„ç†
- **JSON**ï¼šè½»é‡çº§æ•°æ®å­˜å‚¨
  - mistakes.jsonï¼šé”™é¢˜æ•°æ®
  - questions.jsonï¼šé¢˜ç›®æ•°æ®
  - è‡ªåŠ¨å¤‡ä»½æœºåˆ¶

#### å·¥å…·åº“
- **python-dotenv**ï¼šç¯å¢ƒå˜é‡ç®¡ç†
- **uuid**ï¼šå”¯ä¸€æ ‡è¯†ç¬¦ç”Ÿæˆ
- **datetime**ï¼šæ—¶é—´æˆ³å¤„ç†
- **base64**ï¼šå›¾ç‰‡ç¼–ç /è§£ç 

---

## ğŸ”‘ æ ¸å¿ƒæŠ€æœ¯ç»†èŠ‚

### 1. æ··åˆè¾“å…¥æ¶æ„ (OCR + åŸå›¾)

#### è®¾è®¡ç†å¿µ
ç»“åˆOCRæ–‡å­—è¯†åˆ«å’ŒåŸå§‹å›¾åƒè§†è§‰ç†è§£ï¼ŒåŒé‡ä¿éšœè¯†åˆ«å‡†ç¡®æ€§ã€‚

#### æŠ€æœ¯å®ç°

**æ­¥éª¤1ï¼šå›¾åƒé¢„å¤„ç†**
```python
def image_preprocess_v2(img: Image.Image) -> Image.Image:
    # 1. è½¬ä¸ºRGBæ¨¡å¼
    if img.mode != 'RGB':
        img = img.convert('RGB')
    
    # 2. è°ƒæ•´å°ºå¯¸ï¼ˆé˜²æ­¢è¿‡å¤§æˆ–è¿‡å°ï¼‰
    width, height = img.size
    max_dimension = 2000
    if max(width, height) > max_dimension:
        scale = max_dimension / max(width, height)
        new_width = int(width * scale)
        new_height = int(height * scale)
        img = img.resize((new_width, new_height), Image.Resampling.LANCZOS)
    
    return img
```

**æ­¥éª¤2ï¼šå›¾åƒå¢å¼º**
```python
def advanced_image_processing_pipeline(img, sharpen_amount=1.5, clahe_clip_limit=2.0):
    # 1. PIL â†’ OpenCVæ ¼å¼
    img_cv = cv2.cvtColor(np.array(img), cv2.COLOR_RGB2BGR)
    
    # 2. åé”åŒ–æ©æ¨¡ï¼ˆå¢å¼ºè¾¹ç¼˜ï¼‰
    gaussian = cv2.GaussianBlur(img_cv, (5, 5), 0)
    sharpened = cv2.addWeighted(img_cv, 1 + sharpen_amount, gaussian, -sharpen_amount, 0)
    
    # 3. CLAHEå¯¹æ¯”åº¦å¢å¼º
    lab = cv2.cvtColor(sharpened, cv2.COLOR_BGR2LAB)
    l, a, b = cv2.split(lab)
    clahe = cv2.createCLAHE(clipLimit=clahe_clip_limit, tileGridSize=(8, 8))
    l_clahe = clahe.apply(l)
    enhanced = cv2.merge([l_clahe, a, b])
    enhanced = cv2.cvtColor(enhanced, cv2.COLOR_LAB2BGR)
    
    # 4. OpenCV â†’ PILæ ¼å¼
    return Image.fromarray(cv2.cvtColor(enhanced, cv2.COLOR_BGR2RGB))
```

**æ­¥éª¤3ï¼šOCRè¯†åˆ«**
```python
def extract_text_with_pix2text(image: Image.Image) -> str:
    processed_img = image_preprocess_v2(image)
    enhanced_img = advanced_image_processing_pipeline(processed_img)
    
    # Pix2Textè¯†åˆ«
    result = p2t.recognize(enhanced_img)
    ocr_text = result['text'] if isinstance(result, dict) else str(result)
    
    # æ¸…ç†æ–‡æœ¬
    ocr_text = re.sub(r'\n\s*\n\s*\n+', '\n\n', ocr_text)
    return ocr_text.strip()
```

**æ­¥éª¤4ï¼šæ„å»ºæ··åˆè¾“å…¥**
```python
# å¢å¼ºPromptï¼ˆåµŒå…¥OCRç»“æœï¼‰
enhanced_prompt = f"""é¢˜ç›®å†…å®¹å¦‚ä¸‹ï¼š

{ocr_text}

ã€ä»»åŠ¡è¦æ±‚ã€‘
{user_request}

ã€é‡è¦è¯´æ˜ã€‘
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å­¦ç§‘è¾…å¯¼AIåŠ©æ‰‹ï¼Œè¯·è®¤çœŸåˆ†æé¢˜ç›®...
"""

# æ··åˆæ¶ˆæ¯ï¼ˆæ–‡æœ¬ + å›¾ç‰‡ï¼‰
messages = [{
    "role": "user",
    "content": [
        {'text': enhanced_prompt},
        {'image': f"data:image/png;base64,{image_base64}"}
    ]
}]
```

#### ä¼˜åŠ¿åˆ†æ
| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ |
|------|------|------|
| **çº¯OCR** | è¯†åˆ«å¿«é€Ÿ | æ‰‹å†™å­—è¿¹è¯†åˆ«å·®ï¼Œå¤æ‚å…¬å¼æ˜“é”™ |
| **çº¯å›¾åƒ** | è§†è§‰ç†è§£å¥½ | å›¾ç‰‡æ¨¡ç³Šæ—¶è¯†åˆ«å›°éš¾ |
| **æ··åˆè¾“å…¥** | âœ… å…¼å…·ä¸¤è€…ä¼˜åŠ¿ | å¤„ç†æ—¶é—´ç¨é•¿ |

### 2. è‡ªåŠ¨é”™é¢˜ä¿å­˜æœºåˆ¶

#### è§¦å‘æ¡ä»¶
```python
# AIå›ç­”ä¸­åŒ…å«ç‰¹æ®Šæ ‡è®°
has_mistake = "[MISTAKE_DETECTED]" in full_response
is_review_mode = any(keyword in request.prompt for keyword in ["æ‰¹æ”¹", "æ”¹", "æ£€æŸ¥"])

if has_mistake and is_review_mode:
    # è§¦å‘è‡ªåŠ¨ä¿å­˜æµç¨‹
```

#### çŸ¥è¯†ç‚¹æå–
```python
knowledge_prompt = f"""è¯·åˆ†æä»¥ä¸‹é¢˜ç›®å’Œæ‰¹æ”¹å†…å®¹ï¼Œæå–å‡º3-5ä¸ªç²¾ç¡®çš„çŸ¥è¯†ç‚¹æ ‡ç­¾ã€‚

é¢˜ç›®å†…å®¹ï¼š
{ocr_text[:500]}

æ‰¹æ”¹å†…å®¹ï¼š
{cleaned_response[:500]}

è¦æ±‚ï¼š
1. æ¯ä¸ªçŸ¥è¯†ç‚¹æ ‡ç­¾è¦ç²¾ç¡®åˆ°å…·ä½“æ¦‚å¿µï¼ˆå¦‚"ä¸€å…ƒäºŒæ¬¡æ–¹ç¨‹æ±‚æ ¹å…¬å¼"è€Œé"æ–¹ç¨‹"ï¼‰
2. è¿”å›æ ¼å¼ï¼šæ¯è¡Œä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œä½¿ç”¨"- "å¼€å¤´
3. é™åˆ¶3-5ä¸ªçŸ¥è¯†ç‚¹
4. æŒ‰é‡è¦æ€§æ’åº

è¯·ç›´æ¥è¿”å›çŸ¥è¯†ç‚¹åˆ—è¡¨ï¼š"""

# AIæå–çŸ¥è¯†ç‚¹
knowledge_response = call_qwen_vl_max(knowledge_prompt)
knowledge_points = [
    line.strip().lstrip('- ')
    for line in knowledge_response.split('\n')
    if line.strip().startswith('-')
][:5]
```

#### å­¦ç§‘æ¨æµ‹
```python
subject = "æœªåˆ†ç±»"
if any(keyword in ocr_text for keyword in ["æ–¹ç¨‹", "å‡½æ•°", "å‡ ä½•", "x", "y", "="]):
    subject = "æ•°å­¦"
elif any(keyword in ocr_text for keyword in ["å•è¯", "è¯­æ³•", "è¯æ±‡"]):
    subject = "è‹±è¯­"
elif any(keyword in ocr_text for keyword in ["åŠ›", "èƒ½é‡", "é€Ÿåº¦"]):
    subject = "ç‰©ç†"
```

#### æ•°æ®ä¿å­˜
```python
mistake = {
    "id": str(uuid.uuid4()),
    "image_base64": image_base64,
    "question_text": ocr_text,
    "wrong_answer": "(ä»æ‰¹æ”¹ä¸­æå–)",
    "ai_analysis": cleaned_response,
    "subject": subject,
    "knowledge_points": knowledge_points,
    "created_at": datetime.now().isoformat(),
    "reviewed_count": 0
}

mistakes.append(mistake)
save_mistakes(mistakes)  # å†™å…¥ mistakes.json
```

### 3. LaTeXå…¬å¼æ¸²æŸ“æµç¨‹

#### å‰ç«¯æ¸²æŸ“ç®¡çº¿

**æ­¥éª¤1ï¼šMarkdownè§£æ**
```typescript
// ä½¿ç”¨markedåº“è§£æMarkdown
const htmlContent = marked.parse(question.content) as string;
// è¾“å…¥: è®¾ $(1+x)^{2n+1} = a_0 + \cdots$
// è¾“å‡º: <p>è®¾ <code class="language-math">$(1+x)^{2n+1}$</code> = aâ‚€ + â‹¯</p>
```

**æ­¥éª¤2ï¼šæ’å…¥DOM**
```typescript
<div 
  className="math-content"
  dangerouslySetInnerHTML={{ __html: htmlContent }}
/>
```

**æ­¥éª¤3ï¼šMathJaxæ¸²æŸ“**
```typescript
useEffect(() => {
  if (window.MathJax && window.MathJax.typesetPromise) {
    window.MathJax.typesetPromise()
      .then(() => console.log('LaTeXæ¸²æŸ“æˆåŠŸ'))
      .catch(err => console.error('LaTeXæ¸²æŸ“å¤±è´¥:', err));
  }
}, [questions, messages]);
```

**æœ€ç»ˆæ•ˆæœ**ï¼š
```
$(1+x)^{2n+1}$  â†’  (1+x)Â²â¿âºÂ¹  (ä¸Šæ ‡æ­£ç¡®æ˜¾ç¤º)
\binom{2n}{n}   â†’  (â‚‚â‚™)       (ç»„åˆæ•°ç¬¦å·)
                    â¿
```

#### å®¹é”™æœºåˆ¶
```typescript
try {
  return marked.parse(content) as string;
} catch (err) {
  console.error('Markdownè§£æå¤±è´¥:', err);
  // é™çº§ï¼šä½¿ç”¨çº¯æ–‡æœ¬
  return content.replace(/\n/g, '<br/>');
}
```

### 4. ä¼šè¯ç®¡ç†æœºåˆ¶

#### å‰ç«¯ä¼šè¯æŒä¹…åŒ–

**å­˜å‚¨ç»“æ„**
```typescript
interface SessionInfo {
  sessionId: string;
  title: string;
  timestamp: number;
  mode: 'solve' | 'review';
  imageSrc?: string;  // é¢˜ç›®ç¼©ç•¥å›¾
  messages?: Message[];  // å®Œæ•´å¯¹è¯å†å²
}

// ä¿å­˜åˆ° localStorage
localStorage.setItem('ai_solver_sessions', JSON.stringify(sessions));
```

**è‡ªåŠ¨ä¿å­˜æ—¶æœº**
```typescript
useEffect(() => {
  if (sessionId && messages.length > 0) {
    saveSession({
      sessionId,
      title: chatTitle,
      timestamp: Date.now(),
      mode,
      messages: messages
    });
  }
}, [sessionId, messages]);
```

#### åç«¯ä¼šè¯ç®¡ç†

**å†…å­˜å­˜å‚¨**
```python
SESSIONS = {}  # å…¨å±€ä¼šè¯å­—å…¸

SESSIONS[session_id] = {
    "history": [
        {"role": "user", "content": "..."},
        {"role": "assistant", "content": "..."}
    ],
    "title": "æ–°å¯¹è¯",
    "image_base64": "..."
}
```

**è¿½é—®æ—¶é‡å»ºå†å²**
```python
# ç¬¬ä¸€æ¡æ¶ˆæ¯ï¼šåŒ…å«å›¾ç‰‡
messages_to_send = [{
    "role": "user",
    "content": [
        {'text': first_user_message["content"]},
        {'image': f"data:image/png;base64,{original_image_base64}"}
    ]
}]

# æ·»åŠ åç»­å¯¹è¯å†å²
for msg in history[1:]:
    messages_to_send.append(msg)

# æ·»åŠ å½“å‰è¿½é—®
messages_to_send.append({"role": "user", "content": current_prompt})
```

### 5. é”™è¯¯å¤„ç†ä½“ç³»

#### å››å±‚é˜²æŠ¤æœºåˆ¶

**ç¬¬ä¸€å±‚ï¼šReacté”™è¯¯è¾¹ç•Œ**
```typescript
class ErrorBoundary extends React.Component {
  static getDerivedStateFromError(error: Error) {
    return { hasError: true, error };
  }
  
  render() {
    if (this.state.hasError) {
      return <ErrorPage error={this.state.error} />;
    }
    return this.props.children;
  }
}
```

**ç¬¬äºŒå±‚ï¼šç»„ä»¶çº§try-catch**
```typescript
{messages.map((msg, index) => {
  try {
    const htmlContent = marked.parse(msg.content);
    return <MessageBubble html={htmlContent} />;
  } catch (err) {
    return <ErrorPlaceholder error={err} />;
  }
})}
```

**ç¬¬ä¸‰å±‚ï¼šå…¨å±€é”™è¯¯ç›‘å¬**
```typescript
window.addEventListener('error', (event) => {
  console.error('å…¨å±€é”™è¯¯:', event.error);
  showErrorToast(event.message);
  event.preventDefault();  // é˜»æ­¢ç™½å±
});
```

**ç¬¬å››å±‚ï¼šä¼˜é›…é™çº§**
```typescript
// Markdownè§£æå¤±è´¥ â†’ çº¯æ–‡æœ¬æ˜¾ç¤º
// MathJaxæ¸²æŸ“å¤±è´¥ â†’ æ˜¾ç¤ºLaTeXä»£ç 
// å›¾ç‰‡åŠ è½½å¤±è´¥ â†’ å ä½ç¬¦
```

---

## ğŸ“¦ éƒ¨ç½²æŒ‡å—

### ç¯å¢ƒè¦æ±‚

#### ç³»ç»Ÿè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**ï¼šWindows 10/11, macOS, Linux
- **Pythonç‰ˆæœ¬**ï¼š3.9 - 3.13
- **Node.jsç‰ˆæœ¬**ï¼š16.x æˆ–æ›´é«˜

#### ç¡¬ä»¶è¦æ±‚
- **CPU**ï¼šåŒæ ¸åŠä»¥ä¸Š
- **å†…å­˜**ï¼š4GB åŠä»¥ä¸Šï¼ˆæ¨è8GBï¼‰
- **ç£ç›˜ç©ºé—´**ï¼š2GBï¼ˆç”¨äºä¾èµ–å’Œæ¨¡å‹ï¼‰

### å¿«é€Ÿéƒ¨ç½²

#### æ–¹å¼1ï¼šä¸€é”®å¯åŠ¨ï¼ˆWindowsï¼‰
```bash
# åŒå‡»è¿è¡Œ
ã€å¯åŠ¨ã€‘ç®€åŒ–ç‰ˆé”™é¢˜æœ¬ç³»ç»Ÿ.bat
```

#### æ–¹å¼2ï¼šæ‰‹åŠ¨å¯åŠ¨

**åç«¯å¯åŠ¨**
```bash
cd backend
python -m venv venv  # åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆé¦–æ¬¡ï¼‰
.\venv\Scripts\activate  # æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆWindowsï¼‰
pip install -r requirements.txt  # å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡ï¼‰
uvicorn main_simple:app --reload --host 0.0.0.0 --port 8000
```

**å‰ç«¯å¯åŠ¨**
```bash
cd frontend/vite-project
npm install  # å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡ï¼‰
npm run dev
```

### é…ç½®è¯´æ˜

#### åç«¯é…ç½®

**.envæ–‡ä»¶**
```bash
# é˜¿é‡Œäº‘é€šä¹‰åƒé—®API Key
DASHSCOPE_API_KEY=your_api_key_here
```

#### å‰ç«¯é…ç½®

**APIåœ°å€**ï¼ˆ`SimpleMistakeBook.tsx`ï¼‰
```typescript
const API_BASE_URL = 'http://127.0.0.1:8000';
```

### ç›®å½•ç»“æ„
```
ai-solver-mvp/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ main_simple.py          # ä¸»åº”ç”¨
â”‚   â”œâ”€â”€ requirements.txt        # Pythonä¾èµ–
â”‚   â”œâ”€â”€ mistakes.json           # é”™é¢˜æ•°æ®
â”‚   â”œâ”€â”€ questions.json          # é¢˜ç›®æ•°æ®
â”‚   â””â”€â”€ venv/                   # è™šæ‹Ÿç¯å¢ƒ
â”œâ”€â”€ frontend/
â”‚   â””â”€â”€ vite-project/
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ App.tsx         # è§£é¢˜/æ‰¹æ”¹ç•Œé¢
â”‚       â”‚   â”œâ”€â”€ SimpleMistakeBook.tsx  # é”™é¢˜æœ¬/å‡ºé¢˜ç•Œé¢
â”‚       â”‚   â””â”€â”€ main.tsx        # å…¥å£æ–‡ä»¶
â”‚       â”œâ”€â”€ package.json        # Nodeä¾èµ–
â”‚       â””â”€â”€ vite.config.ts      # Viteé…ç½®
â”œâ”€â”€ ã€å¯åŠ¨ã€‘ç®€åŒ–ç‰ˆé”™é¢˜æœ¬ç³»ç»Ÿ.bat  # ä¸€é”®å¯åŠ¨è„šæœ¬
â””â”€â”€ README.md
```

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### å“åº”æ—¶é—´

| æ“ä½œ | å¹³å‡æ—¶é—´ | è¯´æ˜ |
|------|---------|------|
| **å›¾ç‰‡ä¸Šä¼ ** | < 1s | å–å†³äºå›¾ç‰‡å¤§å° |
| **OCRè¯†åˆ«** | 2-5s | å–å†³äºå›¾ç‰‡å¤æ‚åº¦ |
| **AIè§£é¢˜** | 10-30s | å–å†³äºé¢˜ç›®éš¾åº¦ |
| **æ‰¹æ”¹ä½œä¸š** | 10-30s | åŒä¸Š |
| **ç”Ÿæˆé¢˜ç›®ï¼ˆå•é¢˜ï¼‰** | 30-60s | AIç”Ÿæˆéœ€è¦æ—¶é—´ |
| **ç”Ÿæˆè¯•å·ï¼ˆ10é¢˜ï¼‰** | 3-5åˆ†é’Ÿ | æ‰¹é‡ç”Ÿæˆè¾ƒæ…¢ |

### å¹¶å‘èƒ½åŠ›

- **å•æœºå¹¶å‘**ï¼š10-20ä¸ªç”¨æˆ·
- **é™åˆ¶å› ç´ **ï¼š
  - AI APIè°ƒç”¨é¢‘ç‡é™åˆ¶
  - å†…å­˜å­˜å‚¨ä¼šè¯æ•°é‡
  - OCRå¼•æ“å¤„ç†èƒ½åŠ›

### å­˜å‚¨å®¹é‡

- **é”™é¢˜å­˜å‚¨**ï¼šçº¦100KB/é¢˜ï¼ˆå«å›¾ç‰‡ï¼‰
- **é¢˜ç›®å­˜å‚¨**ï¼šçº¦5KB/é¢˜
- **å»ºè®®**ï¼šå®šæœŸæ¸…ç†æ—§æ•°æ®

---

## ğŸ” å®‰å…¨æ€§è¯´æ˜

### æ•°æ®å®‰å…¨

**æœ¬åœ°å­˜å‚¨**
- æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°JSONæ–‡ä»¶
- ä¸ä¸Šä¼ åˆ°äº‘ç«¯æœåŠ¡å™¨
- ç”¨æˆ·å®Œå…¨æ§åˆ¶æ•°æ®

**æ•æ„Ÿä¿¡æ¯**
- API Keyå­˜å‚¨åœ¨ `.env` æ–‡ä»¶
- ä¸æäº¤åˆ°Gitä»“åº“
- ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†

### APIå®‰å…¨

**CORSé…ç½®**
```python
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],  # ç”Ÿäº§ç¯å¢ƒåº”é™åˆ¶åŸŸå
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

**å»ºè®®ç”Ÿäº§ç¯å¢ƒé…ç½®**ï¼š
- é™åˆ¶ `allow_origins` ä¸ºå…·ä½“åŸŸå
- æ·»åŠ é€Ÿç‡é™åˆ¶
- æ·»åŠ è¯·æ±‚ç­¾åéªŒè¯

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: OCRè¯†åˆ«ä¸å‡†ç¡®
**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿å›¾ç‰‡æ¸…æ™°åº¦è¶³å¤Ÿ
- é¿å…æ‰‹å†™å­—è¿¹è¿‡äºæ½¦è‰
- ä½¿ç”¨æ‰«æä»¶è€Œéæ‹ç…§ï¼ˆå¦‚æœå¯èƒ½ï¼‰

### Q2: AIå›ç­”ä¸å¤Ÿè¯¦ç»†
**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨è¿½é—®åŠŸèƒ½ï¼š"è¯·è¯¦ç»†è§£é‡Šç¬¬3æ­¥"
- æ˜ç¡®è¦æ±‚ï¼š"è¯·å†™å‡ºå®Œæ•´çš„è®¡ç®—è¿‡ç¨‹"

### Q3: ç”Ÿæˆé¢˜ç›®è¶…æ—¶
**è§£å†³æ–¹æ¡ˆ**ï¼š
- å‡å°‘å•æ¬¡ç”Ÿæˆé¢˜ç›®æ•°é‡
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- ç­‰å¾…æ›´é•¿æ—¶é—´ï¼ˆå·²å»¶é•¿åˆ°10åˆ†é’Ÿï¼‰

### Q4: LaTeXå…¬å¼ä¸æ˜¾ç¤º
**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç­‰å¾…é¡µé¢å®Œå…¨åŠ è½½
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
- åˆ·æ–°é¡µé¢ï¼ˆCtrl+F5ï¼‰

---

## ğŸ”„ ç‰ˆæœ¬å†å²

### V24.6 (2025-10-20) - å½“å‰ç‰ˆæœ¬
- âœ… å»¶é•¿ç”Ÿæˆé¢˜ç›®è¶…æ—¶5å€
- âœ… ä¿®å¤LaTeXå…¬å¼æ¸²æŸ“
- âœ… Markdownæ ¼å¼æ­£ç¡®è§£æ

### V24.5 (2025-10-20)
- âœ… å…¨é¢é”™è¯¯æ•è·æœºåˆ¶
- âœ… è¯¦å°½çš„æ—¥å¿—ç³»ç»Ÿ
- âœ… ErrorBoundaryç»„ä»¶

### V24.4 (2025-10-20)
- âœ… ä¿®å¤å†å²è®°å½•ç™½å±
- âœ… ä¼˜åŒ–é”™é¢˜è¿‡æ»¤é€»è¾‘
- âœ… ä¸‰å±‚æ¶ˆæ¯æ¸²æŸ“é˜²æŠ¤

### V24.1-V24.3
- âœ… ä¸‰æ¨¡å—é›†æˆï¼ˆè§£é¢˜+æ‰¹æ”¹+é”™é¢˜æœ¬ï¼‰
- âœ… è‡ªåŠ¨é”™é¢˜ä¿å­˜æœºåˆ¶
- âœ… æ™ºèƒ½å‡ºé¢˜åŠŸèƒ½

### V22.1
- âœ… å›¾åƒå¢å¼ºåŠŸèƒ½
- âœ… æ··åˆè¾“å…¥æ¶æ„
- âœ… è¿½é—®å›¾ç‰‡è®°å¿†

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### å¼€å‘å›¢é˜Ÿ
- **é¡¹ç›®åç§°**ï¼šæ²æ¢§AIè§£é¢˜ç³»ç»Ÿ
- **ç‰ˆæœ¬**ï¼šV24.6
- **æœ€åæ›´æ–°**ï¼š2025-10-20

### æŠ€æœ¯æ–‡æ¡£
- ç”¨æˆ·æŒ‡å—ï¼š`ã€å¿…çœ‹ã€‘V24.5ç™½å±è°ƒè¯•æŒ‡å—.md`
- ä¿®å¤è®°å½•ï¼š`V24.x_*.md` ç³»åˆ—æ–‡æ¡£
- APIæ–‡æ¡£ï¼šhttp://127.0.0.1:8000/docs

---

## ğŸ“ æ€»ç»“

**æ²æ¢§AIè§£é¢˜ç³»ç»Ÿ**æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€æŠ€æœ¯å…ˆè¿›çš„æ™ºèƒ½æ•™è‚²è¾…åŠ©å¹³å°ã€‚ç³»ç»Ÿé‡‡ç”¨**æ··åˆè¾“å…¥æ¶æ„**ï¼Œç»“åˆOCRå’Œè§†è§‰AIï¼Œæä¾›äº†è§£é¢˜ã€æ‰¹æ”¹ã€é”™é¢˜ç®¡ç†ã€æ™ºèƒ½å‡ºé¢˜ç­‰å…¨æ–¹ä½åŠŸèƒ½ã€‚

### æ ¸å¿ƒäº®ç‚¹
1. âœ… **åŒé‡è¯†åˆ«ä¿éšœ**ï¼šOCR + åŸå›¾è§†è§‰ï¼Œè¯†åˆ«æ›´å‡†ç¡®
2. âœ… **è‡ªåŠ¨åŒ–é”™é¢˜ç®¡ç†**ï¼šæ‰¹æ”¹æ—¶è‡ªåŠ¨ä¿å­˜ï¼Œæ™ºèƒ½æå–çŸ¥è¯†ç‚¹
3. âœ… **ä¸ªæ€§åŒ–å‡ºé¢˜**ï¼šåŸºäºé”™é¢˜ç”Ÿæˆï¼Œé’ˆå¯¹æ€§è®­ç»ƒ
4. âœ… **å®Œæ•´LaTeXæ”¯æŒ**ï¼šæ•°å­¦å…¬å¼å®Œç¾æ¸²æŸ“
5. âœ… **å¥å£®çš„é”™è¯¯å¤„ç†**ï¼šå››å±‚é˜²æŠ¤ï¼Œä¸ä¼šç™½å±

### æŠ€æœ¯ä¼˜åŠ¿
- è½»é‡çº§éƒ¨ç½²ï¼ˆæ— éœ€æ•°æ®åº“ï¼‰
- æœ¬åœ°åŒ–å­˜å‚¨ï¼ˆæ•°æ®å®‰å…¨ï¼‰
- æ¨¡å—åŒ–è®¾è®¡ï¼ˆæ˜“äºæ‰©å±•ï¼‰
- è¯¦å°½æ—¥å¿—ï¼ˆä¾¿äºè°ƒè¯•ï¼‰

é€‚åˆæ•™è‚²æœºæ„ã€å®¶åº­è¾…å¯¼ã€å­¦ç”Ÿè‡ªå­¦ç­‰å¤šç§åœºæ™¯ä½¿ç”¨ã€‚

