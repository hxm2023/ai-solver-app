# 🎯 沐梧AI V25.1 - 完整功能使用指南

## 📚 系统概述

V25.1 数据库版本完全恢复了本地JSON版本的所有功能，并增加了多用户支持和云端存储能力。

### ✨ 完整功能列表

#### 1. 🤖 AI智能解题
- ✅ 上传题目图片
- ✅ 支持单题/整页/指定题目解答
- ✅ 图片裁剪功能
- ✅ 详细解题步骤
- ✅ 追问功能

#### 2. 📝 AI批改作业
- ✅ 上传作业照片
- ✅ AI自动批改
- ✅ 错题自动识别
- ✅ 知识点自动提取
- ✅ **错题自动保存到数据库**（新增）

#### 3. 📚 错题本管理
- ✅ 查看所有错题
- ✅ 错题分类（学科/年级）
- ✅ 知识点标签
- ✅ 批量选择错题
- ✅ 删除错题

#### 4. 🎯 智能出题系统
- ✅ 按知识点选择
- ✅ 直接选择错题
- ✅ 题目数量设置 (1-20道)
- ✅ 难度选择 (简单/中等/困难)
- ✅ 题型选择 (选择题/填空题/解答题/混合)
- ✅ **🌐 网络辅助出题**（搜索真实题库）
- ✅ AI生成详细解析

#### 5. 📄 PDF导出
- ✅ 导出选中题目
- ✅ 导出全部题目
- ✅ 包含答案和解析
- ✅ 公式正确渲染（MathJax）
- ✅ 图片正确显示

#### 6. 🔐 用户系统
- ✅ 注册/登录
- ✅ JWT令牌认证
- ✅ 多用户数据隔离
- ✅ MySQL云端存储

---

## 🚀 快速启动

### 方法1：使用批处理文件（推荐）

1. **启动后端**：双击 `启动数据库后端.bat`
2. **启动前端**：双击前端启动脚本（或手动运行 `npm run dev`）
3. **访问系统**：打开 `http://localhost:5173/?mode=db`

### 方法2：手动启动

#### 启动后端

```bash
cd backend
venv\Scripts\activate.bat
python -m uvicorn main_db:app --reload --host 127.0.0.1 --port 8000
```

#### 启动前端

```bash
cd frontend\vite-project
npm run dev
```

---

## 📖 完整使用流程

### 步骤1：注册/登录

1. 访问 `http://localhost:5173/?mode=db`
2. 首次使用：点击"注册"，输入账号和密码
3. 已有账号：点击"登录"

**测试账号**：
- 账号：`demo_user`
- 密码：`demo123456`

### 步骤2：AI批改作业（自动收集错题）

1. 点击 **"AI 批改作业"**
2. 上传包含题目和答案的照片
3. 选择批改模式：
   - 单个题目
   - 整张图片
   - 指定题目
4. AI自动批改，如果发现错误：
   - ✅ 自动保存错题到数据库
   - ✅ 自动提取知识点
   - ✅ 生成详细分析

### 步骤3：查看错题本

1. 点击 **"错题本管理"**
2. 切换到 **"我的错题"** 标签页
3. 查看所有错题：
   - 查看题目图片
   - 查看错误答案
   - 查看AI分析
   - 查看知识点标签
4. 勾选需要的错题（用于后续出题）

### 步骤4：智能出题

1. 在错题本页面，切换到 **"智能出题"** 标签页

2. **选择生成方式**（二选一）：
   
   #### 方式A：按知识点选择
   - 勾选知识点（如"函数"、"不等式"）
   - 系统会找到所有包含该知识点的错题
   - 适合针对性训练某个知识点
   
   #### 方式B：直接选择错题
   - 前往"我的错题"标签页
   - 勾选具体的错题
   - 返回"智能出题"标签页
   - 适合巩固特定题目

3. **配置出题参数**：
   - 📊 题目数量：1-20道（建议5-10道）
   - 📈 难度：简单/中等/困难
   - 📝 题型：选择题/填空题/解答题/混合

4. **🌐 网络辅助出题**（可选，强烈推荐）：
   - ✅ 勾选 "允许网络搜索辅助出题"
   - AI会搜索菁优网、组卷网等题库网站
   - 参考真实题目，生成更高质量的练习题
   - 特别适合需要图形的题目（几何、函数图像等）

5. **点击 "🚀 生成专属试卷"**
   - 等待AI生成（通常1-2分钟）
   - 生成后自动跳转到"练习题库"标签页

### 步骤5：查看和导出练习题

1. 切换到 **"练习题库"** 标签页
2. 查看生成的题目：
   - 点击"查看答案"展开答案
   - 点击"查看解析"展开详细解析
   - 查看知识点标签
3. **导出为PDF**：
   - 勾选需要导出的题目
   - 点击 **"📄 导出选中题目为PDF"**
   - 或点击 **"📄 导出全部题目为PDF"**
   - PDF会自动下载到本地

### 步骤6：使用PDF练习

1. 打开下载的PDF文件
2. 打印或直接在设备上练习
3. 完成后可以再次上传到"AI批改作业"检查

---

## 🌐 网络辅助出题详解

### 工作原理

1. **智能搜索**：
   - AI根据错题的知识点和难度构建搜索关键词
   - 搜索菁优网、组卷网等专业题库网站

2. **深度爬取**：
   - 提取真实题目的内容、图片、答案
   - 分析题目结构和知识点

3. **智能生成**：
   - AI参考真实题目的风格和结构
   - 生成与错题相关的练习题
   - 确保题目质量和真实性

### 何时使用

✅ **推荐开启**：
- 需要图形的题目（几何、函数图像、数据统计图等）
- 需要高质量标准题目
- 准备考试或测验

⚪ **可以不开启**：
- 简单的文字题目
- 纯计算题
- 希望快速生成

---

## 💡 使用技巧

### 错题收集技巧

1. **批量上传**：一次上传整张作业纸，选择"改整张图片"
2. **清晰拍照**：确保光线充足，字迹清晰
3. **及时保存**：AI会自动识别错题并保存

### 出题技巧

1. **知识点分类**：
   - 按知识点生成题目，系统性复习
   - 例如：选择"函数"，复习所有函数相关错题

2. **混合训练**：
   - 选择多个知识点，进行综合训练
   - 选择"混合题型"，练习不同题型

3. **渐进式难度**：
   - 先生成"简单"难度巩固基础
   - 再生成"中等"或"困难"难度提升

### PDF导出技巧

1. **分批导出**：
   - 不要一次导出太多题目（建议10-15道）
   - 避免PDF文件过大

2. **包含答案**：
   - 系统默认包含答案和解析
   - 适合自学和自查

3. **及时打印**：
   - 导出后及时打印
   - 纸质练习效果更好

---

## 🔧 常见问题

### Q1: 登录后页面一直加载

**原因**：后端服务未启动或CORS配置问题

**解决**：
1. 确认后端已启动（访问 `http://127.0.0.1:8000/docs`）
2. 检查浏览器控制台错误信息
3. 刷新页面重试

### Q2: 生成题目很慢

**原因**：网络辅助出题需要搜索和爬取，耗时较长

**解决**：
1. 减少题目数量（建议5-10道）
2. 如不需要图形，可关闭网络辅助
3. 耐心等待（通常1-3分钟）

### Q3: PDF导出失败

**原因**：题目包含未渲染的公式或图片

**解决**：
1. 检查后端日志
2. 减少导出题目数量
3. 确保题目内容完整

### Q4: 错题没有自动保存

**原因**：AI未检测到错误，或批改模式不正确

**解决**：
1. 确保使用"AI批改作业"模式
2. 上传的照片要包含题目和答案
3. 检查AI批改结果中是否提到"错误"

### Q5: 网络辅助出题失败

**原因**：网络连接问题或题库网站无法访问

**解决**：
1. 检查网络连接
2. 关闭网络辅助，使用AI直接生成
3. 稍后重试

---

## 📊 数据说明

### 数据存储

- ✅ 所有数据存储在MySQL数据库
- ✅ 每个用户的数据完全隔离
- ✅ 支持多用户并发使用

### 数据安全

- ✅ 密码加密存储（SHA-256）
- ✅ JWT令牌认证
- ✅ 自动登录（7天有效期）

### 数据备份

- 📁 数据库定期备份
- 🔐 建议定期导出PDF保存

---

## 🎓 学习建议

### 高效复习流程

1. **周一到周五**：
   - 完成作业后上传批改
   - 收集错题

2. **周末**：
   - 按知识点分类错题
   - 每个知识点生成5-10道练习题
   - 导出PDF打印练习

3. **考前复习**：
   - 重点复习高频知识点的错题
   - 生成综合练习题（混合题型）
   - 多次练习巩固

### 知识点梳理

1. 定期查看统计数据
2. 识别薄弱知识点
3. 针对性生成练习
4. 反复训练直到掌握

---

## 🆘 获取帮助

如果遇到任何问题：

1. 查看后端日志（cmd窗口输出）
2. 查看浏览器控制台（F12）
3. 参考 `修复连接问题指南.md`
4. 参考 `V25.1_MySQL数据库集成完成报告.md`

---

## 🎉 开始使用

现在您已经了解了所有功能，开始您的高效学习之旅吧！

1. 双击 `启动数据库后端.bat`
2. 访问 `http://localhost:5173/?mode=db`
3. 登录/注册
4. 开始使用！

**记住**：学习的关键是持续练习和及时复习。祝您学习进步！📚✨
